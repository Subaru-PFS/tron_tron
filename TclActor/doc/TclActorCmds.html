<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<title>TclActor Commands and Keywords</title>
</head>
<body>
<h1>TclActor Commands and Keywords</h1>

<p>Contents
<ul>
    <li> <a href= "#Overview">Overview</a>
    <li> <a href= "#Commands">Commands</a>
    <ul>
        <li><a href="#connDev">connDev <i>[dev1 [dev2 [...]]]</i></a>
        <li><a href="#disconnDev">disconnDev <i>[dev1 [dev2 [...]]]</i></a>
        <li><a href="#help">help</a>
        <li><a href="#exit">exit</a>
        <li><a href="#status">status</a>
        <p>
        <li><a href="#debugMsgs">debugMsgs on/off</a>
        <li><a href="#debugRefCounts">debugRefCounts</a>
        <li><a href="#debugWing">debugWing</a>
    </ul>
    <li><a href="#Keywords">Keywords</a>
    <ul>
        <li><a href="#devConnState"><i>dev</i>ConnState=<i>state, reason</i></a>
        <li><a href="#NumUsers">NumUsers=<i>int</i></a>
        <li><a href="#RefCount">RefCount=<i>refcount, object</i></a>
        <li><a href="#Superseded">Superseded</a>
        <li><a href="#Timeout">Timeout</a>
        <li><a href="#UnknownCommand">UnknownCommand=<i>cmdVerb</i></a>
        <li><a href="#UserInfo">UserInfo=<i>userID1, addr1, userID2, addr2, ...</i></a>
        <li><a href="#YourUserID">YourUserID=<i>int</i></a>
    </ul>
</ul>

<h2><a name= "Overview">Overview</a></h2>

<p>TclActor is core code for writing an actor: an instrument control computer (ICC) or hub-based script that does something useful. Any actor based on TclActor will support the commands and keywords described in here (unless the programmer has overridden them).

<h2><a name= "Commands">Commands</a></h2>

<p>Commands are not case-sensitive.

<h3><a name="connDev">connDev <i>[dev1 [dev2 [...]]]</i></a></h3>

<p>Connect one or more devices (if not already connected). The default is to connect all devices that are not already connected.

<h3><a name="disconnDev">disconnDev <i>[dev1 [dev2 [...]]]</i></a></h3>

<p>Disconnect one or more devices (if not already disconnected). The default is to disconnect all devices that are not already disconnected.

<h3><a name="help">help</a></h3>

<p>Print a brief description of each command.

<h3><a name="exit">exit</a></h3>

<p>Log yourself out.

<h3><a name="status">status</a></h3>

<p>Print current status, including user information, the connection state of any devices that are not connected and any additional information that is specific to the actor.

<h3><a name="debugMsgs">debugMsgs</a> on/off</h3>

<p>Turn debugging messages on or off (for all users).

<h3><a name="debugRefCounts">debugRefCounts</a></h3>

<p>Display the reference count for each object (in descending reference count) using keyword <a href="#RefCount">RefCount</a>.

<h3><a name="debugWing">debugWing</a></h3>

<p>Enable debugging via WingIDE (simply imports wingdbstubs).

<h2><a name="Keywords"></a>Keywords</h2>

<p>Keyword data is output whenever the state of the dev actor or underlying hardware and hardware controller changes.

<p>Notes:
<ul>
    <li><i>Dev</i> is a placeholder for a device name
    <li>Numeric values (even integers) will be "NaN" if unknown
    <li>When you first connect you are shown current status.
</ul>

<h3><a name="devConnState"></a><i>dev</i>ConnState=<i>state, reason</i></h3>

<p>State of connection to the dev hardware controller. <i>State</i> is one of Connecting, Authorizing, Connected, Disconnecting, Failing, Disconnected or Failed (the states of an RO.Comm.TCPConnection object). <i>Reason</i> is the reason it got to this state ("" if no reason specified).

<h3><a name="NumUsers"></a>NumUsers=<i>int</i></h3>

<p>The number of users presently connected (a single integer)

<h3><a name="RefCount">RefCount=<i>refcount, object</i></a></h3>

<p>The reference count for an object.

<h3><a name="Superseded"></a>Superseded</h3>

<p>The command was superseded by some other command.

<h3><a name="Timeout"></a>Timeout</h3>

<p>The command timed out.

<h3><a name="UnknownCommand">UnknownCommand=<i>cmdVerb</i></a></h3>

<p>The command verb (the first word of your command string) is not supported by this actor.

<h3><a name="UserInfo"></a>UserInfo=<i>userID1, addr1, userID2, addr2, ...</i></h3>

<p>An variable-length array containing two entries for each user who is presently connected: userID and the IP address. The user ID is an integer and the address is a string. The userIDs will appear in sorted order but are not necessarily contiguous.

<h3><a name="YourUserID"></a>YourUserID=<i>int</i></h3>

<p>Your own userID.

</body>
</html>
